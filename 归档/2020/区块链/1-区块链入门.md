# 区块链入门

## 什么是区块链？

什么是区块链，区块链的作用是什么，而什么又是比特币，它和区块链的关系是什么，众多的其他币种，如莱特币、以太币等等，它们和比特币又是什么关系。我想这些问题应该是所有接触到区块链所会面临的问题吧。

其实区块链所构建的网络是一个**去中心化的分布式网络**，那何为**去中心化**，什么又是**分布式网络**？

我们先了解下什么是中心化，再来理解去中心化就简单了。我们以微信转账为例子，我们用微信给好友转账时，钱是直接到好友的账户么？其实并不是，我们所有的操作都需要经过微信服务器进行处理，转账的操作也是如此，微信服务器会对两者的账户进行一加一减的账户操作。很明显，这里面微信服务器就是核心，所有的行为都要经过它。这就是中心化的简单理解。

当下我们很多互联网产品都是中心化的，甚至我们的银行也是中心化，试着想想，如果这些中心出了问题，会发生什么事情，简单的可能转账无法操作，严重的可能还会有资料泄露、账户安全受到威胁等等。

于是便有人提出了**去中心化**，也即不存在所谓的中心，数据通过一些安全的方式直接传输给对端，这样即使中心出现了问题，也不会影响所有端点。然而这只是为什么我们需要去中心化的一个很小的理由，更大的理由其实是我们并不信任中心节点。

你能放心把钱放在微信，是因为有腾讯这个巨头企业给你做背书，是你选择了信任它，银行也是同理。那所有的中心节点都是值得信任的么，你如何保证哪天它不会篡改你的数据，甚至倒闭、跑路了呢，P2P、”小黄车“不都是这样么。正因为如此，去中心化才得到的大范围的推崇。

再回到转账的例子，当节点间是去中心化的，那么好友怎么知道你要给他转账呢，并且相互同意转账并完成转账的过程。这个认知的过程，其实就是**共识**，通过共识，节点之间就能知道彼此接下去要做的事情。而共识还有个作用，就是让区块链的各个节点之间能够达到相互信任的状态，毕竟每个节点都是独立的个体，也因此每个节点都具备能够作恶（篡改、造假等）的本性，因此必须通过一种共识的机制，完成数据的准确性验证。**共识算法**有很多，如PoW、Pos等等。

介绍完了去中心化，那分布式网络呢，这个概念比较复杂，可以简单的理解通过去中心化构成的节点组合而成的网络结构，就是个分布式网络，也就是**去中心化的分布式网络**，这也是区块链要构建的一个网络环境。

## 区块链系统的工作原理

现在我们了解了什么是区块链，以及为什么想要使用区块链了，那接下来就来了解下区块链真正在工作的时候是什么样的。这里是以比特币区块链为例子来理解，其他币种的区块链都是基于它做了优化，因此理解比特币的区块链，之后了解其他币种的区块链就简单多了。

首先，每个节点（用户，或者说机器）都会有一个**公私钥**用于**加密和解密**数据，公钥加密过的数据只能由私钥解密后才能获取到里面的数据。而私钥除了能够解密数据之外，也可以对数据进行加密，**私钥加密**的过程叫做**签名**，而签名之后的数据，只能使用**公钥**来**验证**。公钥可以公开给所有节点，私钥只能自己持有，也就是说公钥最终会同步给所有区块链的所有节点上。

接下来进行交易，例如李四要转账3个比特币给王五，他需要将上一笔交易，和下一笔交易的收款人进行打包，这个收款人采用的就是我们知道的**钱包地址** ，钱包地址是收款人的公钥进行哈希之后的一个数值，这个数值是可以逆向解出公钥的，将这些信息打包后，会用转账者，即李四的私钥进行签名，这个签名就像一个李四的签章，例如上一笔交易是张三给李四转账了2个币，当前这笔是李四要给王五转账3个币，将这两个信息进行签名后，任何中间人或者非法的节点就无法篡改数据，因为一点数据被篡改，一旦使用公钥进行验证，会发现无法验证，因为公钥只能验证与他匹配的私钥签名后的数据。

这次的交易信息会被广播到区块链的所有节点上，而收款人王五也会收到签名数据，由于先前已经各个节点已经同步了李四的公钥，因此每个节点都可以使用李四的公钥对数据进行验证，验证发送的数据是否合法有效。一旦验证通过，就可以准备将数据存入区块当中。

由于每个节点都具备将数据打包到区块的权利，但是最终只能有一个节点能够负责打包。交易要存入区块是为了方便后续的查询。那如何决定打包的这个节点，就是共识算法要解决的事情了。一些节点会按照算法的要求不断去计算一个值，举个现实的例子的话，相当于给定一套扑克牌，随机抽取4张牌，这4张牌能够通过四则运算得出一个结果为24的值，而当首个计算出满足算法的要求的值时，就能作为最终的打包者。这些在不断计算进而争取打包功能的节点就是我们说的**矿工**，矿工不断计算最终生成区块的过程就是**挖矿**。

矿工获取到区块后，便可以将之前的交易放入区块中。当然一个区块可以可以存储很多交易。当有一个矿工计算得到区块后，便能够领取比特币奖励，通过这样的奖励来吸引更大的矿工来计算区块。

最终这个存入区块的交易也会被广播到所有区块链节点，广播信息依旧是会采用私钥签名，每个节点都会采用公钥进行验证，没问题后便会更新本地的区块信息。

总的来说就是如下几个步骤：

1. 用户发起比特币交易
2. 交易信息签名，包括上笔交易和收款人的钱包
3. 交易信息全局广播
4. 节点验证交易信息签名
5. 矿工挖矿生成区块
6. 交易信息存储入区块
7. 全局广播交易信息存入区块的消息
8. 各个节点更新本地各个节点数据

## 区块链、比特币、其他币种的关系

接下来我们继续解答后续的几个问题，什么是比特币，它和区块链的关系，还有其他币种，如莱特币、以太币等又和比特币什么关系？

比特币很简单，他是中本聪创造的数字货币，可以说是所有其他币种的始祖，它是数字货币的一种，会基于区块链全球发行，而比特币区块产生的速度非常慢（十几分钟一个区块），这么低效的速度，主要还是依赖的共识算法决定。而其他币种，如莱特币和以太币等，在区块生成是使用了一些高效的共识算法，优化了区块的生成速度。

因此比特币，包括莱特币、以太币都是数字货币，他们都是需要基于区块链来存储和发行，而这种数字货币是没有国家政府背书的虚拟货币，具备了”去信任“、”点对点“、”公开记账“、”不可篡改“等特征。